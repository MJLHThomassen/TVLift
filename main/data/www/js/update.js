(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["update"],{"0fd8":function(e,t,n){},"1a97":function(e,t,n){},"277f":function(e,t,n){},"2e8c":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"update"},[n("form",[n("fieldset",{staticClass:"col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},[n("legend",[e._v("Update")]),n("div",{staticClass:"dropbox"},[n("input",{attrs:{id:"firmware-file-input",type:"file"},on:{change:e.firmwareFileChanged}}),e._m(0)]),n("button",{staticClass:"button primary",attrs:{disabled:!e.canUpdate,type:"button"},on:{click:e.update}},[e._v("Update!")])]),e.isUpdating||e.updateErrorMessage?n("fieldset",{staticClass:"col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},[n("legend",[e._v("Status")]),n("div",[n("p",[e._v("Updating: "+e._s(e.updateProgress)+" %")]),n("progress",{staticClass:"primary",attrs:{max:"1000"},domProps:{value:10*e.updateProgress}})]),e.updateErrorMessage?n("div",{staticClass:"card fluid error"},[e._v(" "+e._s(e.updateErrorMessage)+" ")]):e._e()]):e._e()])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" Drag your file here to begin"),n("br"),e._v("or click to browse ")])}],a=(n("b0c0"),n("96cf"),n("1da1")),r=n("d4ec"),c=n("bee2"),o=n("99de"),u=n("7e84"),l=n("262e"),d=n("9ab4"),f=n("60a3"),p=n("0a35"),h=n("bc3a"),b=n.n(h),v=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(o["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.selectedFirmwareFile=null,e.isUpdating=!1,e.updateProgress=0,e.updateErrorMessage="",e}return Object(l["a"])(t,e),Object(c["a"])(t,[{key:"firmwareFileChanged",value:function(e){var t=e.target;null!=t&&null!=t.files&&(this.selectedFirmwareFile=t.files[0])}},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.selectedFirmwareFile){e.next=2;break}return e.abrupt("return");case 2:return this.updateErrorMessage="",this.isUpdating=!0,t=new FormData,t.set("firmware",this.selectedFirmwareFile,this.selectedFirmwareFile.name),e.prev=6,e.next=9,b.a.post("/api/upload/firmware",t,{onUploadProgress:function(e){s.updateProgress=Math.round(100*e.loaded/e.total)}});case 9:n=e.sent,console.log(n),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](6),this.updateProgress=0,this.isAxiosError(e.t0)?(console.log(e.t0.message),this.updateErrorMessage=e.t0.message):(console.log("Something went wrong: "+e.t0),this.updateErrorMessage=e.t0);case 17:this.isUpdating=!1;case 18:case"end":return e.stop()}}),e,this,[[6,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"isAxiosError",value:function(e){return e.isAxiosError}},{key:"canUpdate",get:function(){return null!=this.selectedFirmwareFile&&!this.isUpdating}}]),t}(f["c"]);v=Object(d["a"])([Object(f["a"])({components:{UploadIcon:p["f"]}})],v);var m=v,w=m,k=(n("4ca6"),n("2877")),g=Object(k["a"])(w,s,i,!1,null,null,null);t["default"]=g.exports},"4c6f":function(e,t,n){},"4ca6":function(e,t,n){"use strict";var s=n("277f"),i=n.n(s);i.a},"4ddb":function(e,t,n){"use strict";var s=n("0fd8"),i=n.n(s);i.a},"5ab0":function(e,t,n){"use strict";var s=n("4c6f"),i=n.n(s);i.a},c32d:function(e,t,n){"use strict";var s=n("1a97"),i=n.n(s);i.a},c78d:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card fluid home"},[n("h2",{staticClass:"section double-padded"},[e._v("Lift Controls")]),n("div",{staticClass:"section double-padded"},[n("div",{staticClass:"container"},[e._v(" base: "+e._s(e.baseUri)+" status: "+e._s(e.status)+" online: "+e._s(e.isLiftOnline)+" "),e.isLiftOnline?[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm"},[e._v(" Speed: "+e._s(e.currentSpeed)+" ")])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-4 col-sm-offset-4"},[n("button",{on:{click:e.liftGoUp}},[n("arrow-up-icon",{attrs:{size:"5x"}})],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-4"},[n("button",{on:{click:e.liftFaster}},[n("minus-icon",{attrs:{size:"5x"}})],1)]),n("div",{staticClass:"col-sm-4"},[n("button",{on:{click:e.liftStop}},[n("square-icon",{staticClass:"stop-button",attrs:{size:"5x"}})],1)]),n("div",{staticClass:"col-sm-4"},[n("button",{on:{click:e.liftSlower}},[n("plus-icon",{attrs:{size:"5x"}})],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-4 col-sm-offset-4"},[n("button",{on:{click:e.liftGoDown}},[n("arrow-down-icon",{attrs:{size:"5x"}})],1)])])]:[e._m(0)]],2)])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-4 col-sm-offset-4"},[n("div",{staticClass:"card fluid error"},[n("h3",[e._v("Error")]),n("p",[e._v("Lift is not online!")])])])])}],a=n("d4ec"),r=n("bee2"),c=n("99de"),o=n("7e84"),u=n("262e"),l=n("9ab4"),d=n("60a3"),f=n("0a35"),p=n("bc3a"),h=n.n(p),b=function(e){function t(){var e;return Object(a["a"])(this,t),e=Object(c["a"])(this,Object(o["a"])(t).call(this)),e.baseUri="api/",e.currentSpeed=0,e.status="offline",e.axios=h.a.create({baseURL:e.baseUri}),e}return Object(u["a"])(t,e),Object(r["a"])(t,[{key:"mounted",value:function(){this.updateStatus(),this.updateSpeed()}},{key:"liftGoUp",value:function(){this.axios.post("lift/up",{speed:this.currentSpeed})}},{key:"liftGoDown",value:function(){this.axios.post("lift/down",{speed:this.currentSpeed})}},{key:"liftStop",value:function(){this.axios.post("lift/stop")}},{key:"liftSlower",value:function(){var e=this;this.updateSpeed().then((function(t){return e.axios.post("lift/speed",{speed:t/2})})).catch((function(e){console.error(e)})).then(this.updateSpeed)}},{key:"liftFaster",value:function(){var e=this;this.updateSpeed().then((function(t){return e.axios.post("lift/speed",{speed:2*t})})).catch((function(e){console.error(e)})).then(this.updateSpeed)}},{key:"updateStatus",value:function(){var e=this;return this.axios.get("lift/status").then((function(t){e.status=t.data.status})).catch((function(e){console.error(e)}))}},{key:"updateSpeed",value:function(){var e=this;return this.axios.get("lift/speed").then((function(t){return e.currentSpeed=t.data.speed,e.currentSpeed})).catch((function(t){return console.error(t),e.currentSpeed}))}},{key:"isLiftOnline",get:function(){return"online"===this.status}}]),t}(d["c"]);b=Object(l["a"])([Object(d["a"])({components:{ArrowUpIcon:f["b"],ArrowDownIcon:f["a"],SquareIcon:f["e"],PlusIcon:f["d"],MinusIcon:f["c"]}})],b);var v=b,m=v,w=(n("c32d"),n("2877")),k=Object(w["a"])(m,s,i,!1,null,null,null);t["default"]=k.exports},e94b:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"debug"},[n("h2",[e._v("Debug")]),null===e.webSocket?n("wifi-off-icon",{staticClass:"disconnected-icon"}):e._e(),n("console",{attrs:{"new-entry":e.newEntry}})],1)},i=[],a=(n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),r=n("d4ec"),c=n("bee2"),o=n("99de"),u=n("7e84"),l=n("262e"),d=n("9ab4"),f=n("60a3");function p(e){return new Promise((function(t,n){return setTimeout(n,e)}))}var h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"console-window"},[n("div",{ref:"console",staticClass:"console"},e._l(e.consoleLines,(function(t){return n("span",{key:t.index,staticClass:"code-line"},e._l(t.spans,(function(t,s){return n("span",{key:s,style:t.css},[e._v(" "+e._s(t.text)+" ")])})),0)})),0)])},b=[],v=(n("4160"),n("ac1f"),n("5319"),n("159b"),n("0c84")),m=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(o["a"])(this,Object(u["a"])(t).call(this)),e.consoleLines=[],e}return Object(l["a"])(t,e),Object(c["a"])(t,[{key:"onEntriesChanged",value:function(e,t){this.addConsoleLines(e)}},{key:"addConsoleLines",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=v["parse"](t),s.spans.forEach((function(e){e.text=e.text.replace(" ","Â ")})),this.consoleLines.push({index:this.consoleLines.length,spans:s.spans}),e.next=5,this.$nextTick();case 5:null===(n=this.$refs.console.lastElementChild)||void 0===n||n.scrollIntoView(!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}(f["c"]);Object(d["a"])([Object(f["b"])()],m.prototype,"newEntry",void 0),Object(d["a"])([Object(f["d"])("newEntry")],m.prototype,"onEntriesChanged",null),m=Object(d["a"])([f["a"]],m);var w=m,k=w,g=(n("5ab0"),n("2877")),y=Object(g["a"])(k,h,b,!1,null,"1c543dcc",null),S=y.exports,O=n("0a35"),_=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(o["a"])(this,Object(u["a"])(t).call(this)),e.WebsocktUri="ws://"+location.host+"/api",e.reconnectWebSocket=!0,e.webSocket=null,e.newEntry="",e}return Object(l["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.initialiseWebSocket();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){this.destroyWebSocket()}},{key:"initialiseWebSocket",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.connectWebSocket();case 2:this.webSocket=e.sent,this.webSocket.onclose=function(e){t.webSocket=null,t.reconnectWebSocket&&t.initialiseWebSocket()},this.webSocket.onmessage=this.onWebSocketMessage;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroyWebSocket",value:function(){var e;this.reconnectWebSocket=!1,null===(e=this.webSocket)||void 0===e||e.close()}},{key:"connectWebSocket",value:function(){var e,t=this,n=2e3;try{e=new WebSocket(this.WebsocktUri)}catch(i){return this.connectWebSocket()}var s=new Promise((function(t,n){e.onopen=function(n){t(e)},e.onerror=function(e){n()}}));return Promise.race([s,p(n)]).catch((function(n){return t.reconnectWebSocket?t.connectWebSocket():e}))}},{key:"onWebSocketMessage",value:function(e){this.newEntry=e.data}}]),t}(f["c"]);_=Object(d["a"])([Object(f["a"])({components:{Console:S,WifiOffIcon:O["g"]}})],_);var j=_,C=j,x=(n("4ddb"),Object(g["a"])(C,s,i,!1,null,null,null));t["default"]=x.exports}}]);