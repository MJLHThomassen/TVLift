(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["update"],{"0fd8":function(e,t,n){},"1a97":function(e,t,n){},"277f":function(e,t,n){},"2e8c":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"update"},[n("form",[n("fieldset",{staticClass:"col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},[n("legend",[e._v("Update")]),n("div",{staticClass:"dropbox"},[n("input",{attrs:{id:"firmware-file-input",type:"file"},on:{change:e.firmwareFileChanged}}),e._m(0)]),n("button",{staticClass:"button primary",attrs:{disabled:!e.canUpdate,type:"button"},on:{click:e.update}},[e._v("Update!")])]),e.isUpdating||e.updateErrorMessage?n("fieldset",{staticClass:"col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},[n("legend",[e._v("Status")]),n("div",[n("p",[e._v("Updating: "+e._s(e.updateProgress)+" %")]),n("progress",{staticClass:"primary",attrs:{max:"1000"},domProps:{value:10*e.updateProgress}})]),e.updateErrorMessage?n("div",{staticClass:"card fluid error"},[e._v(" "+e._s(e.updateErrorMessage)+" ")]):e._e()]):e._e()])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" Drag your file here to begin"),n("br"),e._v("or click to browse ")])}],r=(n("b0c0"),n("96cf"),n("1da1")),c=n("d4ec"),i=n("bee2"),o=n("99de"),l=n("7e84"),u=n("262e"),d=n("9ab4"),f=n("60a3"),p=n("0a35"),b=n("bc3a"),h=n.n(b),v=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.selectedFirmwareFile=null,e.isUpdating=!1,e.updateProgress=0,e.updateErrorMessage="",e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"firmwareFileChanged",value:function(e){var t=e.target;null!=t&&null!=t.files&&(this.selectedFirmwareFile=t.files[0])}},{key:"update",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.selectedFirmwareFile){e.next=2;break}return e.abrupt("return");case 2:return this.updateErrorMessage="",this.isUpdating=!0,t=new FormData,t.set("firmware",this.selectedFirmwareFile,this.selectedFirmwareFile.name),e.prev=6,e.next=9,h.a.post("upload/firmware",t,{onUploadProgress:function(e){s.updateProgress=Math.round(100*e.loaded/e.total)}});case 9:n=e.sent,console.log(n),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](6),this.updateProgress=0,this.isAxiosError(e.t0)?(console.log(e.t0.message),this.updateErrorMessage=e.t0.message):(console.log("Something went wrong: "+e.t0),this.updateErrorMessage=e.t0);case 17:this.isUpdating=!1;case 18:case"end":return e.stop()}}),e,this,[[6,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"isAxiosError",value:function(e){return e.isAxiosError}},{key:"canUpdate",get:function(){return null!=this.selectedFirmwareFile&&!this.isUpdating}}]),t}(f["c"]);v=Object(d["a"])([Object(f["a"])({components:{UploadIcon:p["d"]}})],v);var w=v,g=w,k=(n("4ca6"),n("2877")),m=Object(k["a"])(g,s,a,!1,null,null,null);t["default"]=m.exports},"4c6f":function(e,t,n){},"4ca6":function(e,t,n){"use strict";var s=n("277f"),a=n.n(s);a.a},"4ddb":function(e,t,n){"use strict";var s=n("0fd8"),a=n.n(s);a.a},"5ab0":function(e,t,n){"use strict";var s=n("4c6f"),a=n.n(s);a.a},c32d:function(e,t,n){"use strict";var s=n("1a97"),a=n.n(s);a.a},c78d:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card fluid home"},[n("h2",{staticClass:"section double-padded"},[e._v("Lift Controls")]),n("div",{staticClass:"section double-padded"},[n("div",{staticClass:"col-12"},[n("button",{on:{click:e.liftGoUp}},[n("arrow-up-icon",{attrs:{size:"5x"}})],1)]),n("div",{staticClass:"col-12"},[n("button",{on:{click:e.liftStop}},[n("square-icon",{staticClass:"stop-button",attrs:{size:"5x"}})],1)]),n("div",{staticClass:"col-12"},[n("button",{on:{click:e.liftGoDown}},[n("arrow-down-icon",{attrs:{size:"5x"}})],1)])])])},a=[],r=n("d4ec"),c=n("bee2"),i=n("99de"),o=n("7e84"),l=n("262e"),u=n("9ab4"),d=n("60a3"),f=n("0a35"),p=n("bc3a"),b=n.n(p),h=function(e){function t(){return Object(r["a"])(this,t),Object(i["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(c["a"])(t,[{key:"liftGoUp",value:function(){b.a.post("/api/lift/up")}},{key:"liftGoDown",value:function(){b.a.post("/api/lift/down")}},{key:"liftStop",value:function(){b.a.post("/api/lift/stop")}}]),t}(d["c"]);h=Object(u["a"])([Object(d["a"])({components:{ArrowUpIcon:f["b"],ArrowDownIcon:f["a"],SquareIcon:f["c"]}})],h);var v=h,w=v,g=(n("c32d"),n("2877")),k=Object(g["a"])(w,s,a,!1,null,null,null);t["default"]=k.exports},e94b:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"debug"},[n("h2",[e._v("Debug")]),null===e.webSocket?n("wifi-off-icon",{staticClass:"disconnected-icon"}):e._e(),n("console",{attrs:{"new-entry":e.newEntry}})],1)},a=[],r=(n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),c=n("d4ec"),i=n("bee2"),o=n("99de"),l=n("7e84"),u=n("262e"),d=n("9ab4"),f=n("60a3");function p(e){return new Promise((function(t,n){return setTimeout(n,e)}))}var b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"console-window"},[n("div",{ref:"console",staticClass:"console"},e._l(e.consoleLines,(function(t){return n("span",{key:t.index,staticClass:"code-line"},e._l(t.spans,(function(t,s){return n("span",{key:s,style:t.css},[e._v(" "+e._s(t.text)+" ")])})),0)})),0)])},h=[],v=(n("4160"),n("ac1f"),n("5319"),n("159b"),n("0c84")),w=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).call(this)),e.consoleLines=[],e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"onEntriesChanged",value:function(e,t){this.addConsoleLines(e)}},{key:"addConsoleLines",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=v["parse"](t),s.spans.forEach((function(e){e.text=e.text.replace(" ","Â ")})),this.consoleLines.push({index:this.consoleLines.length,spans:s.spans}),e.next=5,this.$nextTick();case 5:null===(n=this.$refs.console.lastElementChild)||void 0===n||n.scrollIntoView(!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}(f["c"]);Object(d["a"])([Object(f["b"])()],w.prototype,"newEntry",void 0),Object(d["a"])([Object(f["d"])("newEntry")],w.prototype,"onEntriesChanged",null),w=Object(d["a"])([f["a"]],w);var g=w,k=g,m=(n("5ab0"),n("2877")),y=Object(m["a"])(k,b,h,!1,null,"1c543dcc",null),O=y.exports,j=n("0a35"),_=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).call(this)),e.WebsocktUri="ws://"+location.host+"/api",e.reconnectWebSocket=!0,e.webSocket=null,e.newEntry="",e}return Object(u["a"])(t,e),Object(i["a"])(t,[{key:"mounted",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.initialiseWebSocket();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeDestroy",value:function(){this.destroyWebSocket()}},{key:"initialiseWebSocket",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.connectWebSocket();case 2:this.webSocket=e.sent,this.webSocket.onclose=function(e){t.webSocket=null,t.reconnectWebSocket&&t.initialiseWebSocket()},this.webSocket.onmessage=this.onWebSocketMessage;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroyWebSocket",value:function(){var e;this.reconnectWebSocket=!1,null===(e=this.webSocket)||void 0===e||e.close()}},{key:"connectWebSocket",value:function(){var e,t=this,n=2e3;try{e=new WebSocket(this.WebsocktUri)}catch(a){return this.connectWebSocket()}var s=new Promise((function(t,n){e.onopen=function(n){t(e)},e.onerror=function(e){n()}}));return Promise.race([s,p(n)]).catch((function(n){return t.reconnectWebSocket?t.connectWebSocket():e}))}},{key:"onWebSocketMessage",value:function(e){this.newEntry=e.data}}]),t}(f["c"]);_=Object(d["a"])([Object(f["a"])({components:{Console:O,WifiOffIcon:j["e"]}})],_);var C=_,S=C,x=(n("4ddb"),Object(m["a"])(S,s,a,!1,null,null,null));t["default"]=x.exports}}]);